<?xml version='1.0' encoding='UTF-8'?>
<simple-page xmlns="http://n2oapp.net/framework/config/schema/page-4.0"
             name="Автотесты. Обновление метаданных строк при вставке в начало списка multi-set">
    <form>
        <fields>
            <multi-set id="list" can-remove="false">
                <row>
                    <input-text id="input" required="true">

                    </input-text>
                    <input-text id="input2" required="true" default-value="def - {index}">

                    </input-text>
                    <button label="remove current" validate="false">
                        <set-value to="list">
                            const newList = list ? [...list] : []
                            newList.splice(index, 1)
                            return newList
                        </set-value>
                    </button>
                </row>
            </multi-set>
            <row>
                <button label="add to start" validate="false">
                    <set-value to="list">
                        return list ? [{}, ...list] : [{}]
                    </set-value>
                </button>
                <button label="add to end" validate="false">
                    <set-value to="list">
                        return list ? [...list, {}] : [{}]
                    </set-value>
                </button>
                <button label="remove from end" validate="false">
                    <set-value to="list">
                        const newList = list ? [...list] : []
                        newList.splice(list.length - 1, 1)
                        return newList
                    </set-value>
                </button>
                <button label="remove from start" validate="false">
                    <set-value to="list">
                        const newList = list ? [...list] : []
                        newList.splice(0, 1)
                        return newList
                    </set-value>
                </button>
            </row>
        </fields>
    </form>
</simple-page>