<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-4.0"
      name="Передача параметров">
    <regions>
        <table id="master">
            <datasource query-id="test"/>
            <columns>
                <column text-field-id="id"/>
                <column text-field-id="name"/>
                <column text-field-id="birthDate"/>
            </columns>
            <filters>
                <input-select id="gender" enabled="false" label="Этот фильтр нужен только для прогрева query" query-id="gender"/>
            </filters>
        </table>
        <table id="detail">
            <toolbar>
                <button id="create" label="Префильтрация одного поля на странице" model="filter">
                    <open-page page-id="detailForm" submit-operation-id="create" route="/create">
                        <datasources>
                            <datasource default-values-mode="defaults"/>
                        </datasources>
                        <params>
                            <query-param name="gender_id" value="1"/>
                        </params>
                    </open-page>
                </button>
                <button id="open" label="Префильтрация данных на странице" model="resolve">
                    <open-page page-id="showForm" route="/show">
                        <datasources>
                            <datasource default-values-mode="query"/>
                        </datasources>
                        <params>
                            <query-param name="name" value="{name}" datasource="detail" model="resolve"/>
                        </params>
                    </open-page>
                </button>
                <button id="create2" label="Значения по умолчанию" model="filter">
                    <open-page page-id="defaultValueForm" submit-operation-id="create" route="/create2">
                        <datasources>
                            <datasource default-values-mode="defaults"/>
                        </datasources>
                        <params>
                            <query-param name="parent_id" value="{id}" datasource="master" model="resolve"/>
                            <query-param name="birthDate" value="{birthDate}" datasource="master" model="resolve"/>
                            <query-param name="gender_id" value="1"/>
                        </params>
                    </open-page>
                </button>
            </toolbar>
            <datasource query-id="detail" object-id="detail">
                <dependencies>
                    <fetch on="master" model="resolve"/>
                </dependencies>
                <filters>
                    <eq field-id="parent_id" value="{id}" datasource="master" model="resolve" required="true"/>
                </filters>
            </datasource>
            <columns>
                <column text-field-id="id"/>
                <column text-field-id="name"/>
            </columns>
        </table>
    </regions>
</page>