<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-4.0"
      name="Прокидывание модели на форму в модальное окно или drawer">
    <regions>
        <line label="Передача параметров из формы">
            <form id="form">
                <fields>
                    <input-text id="address" label="Адрес (собирается из того, что ввели в модальном окне)">
                        <toolbar>
                            <button class="fa fa-plus" model="filter">
                                <show-modal page-id="modal" submit-label="Сохранить" route="/modalPage"
                                            submit-action-type="copy" copy-mode="replace"/>
                            </button>
                        </toolbar>
                        <dependencies>
                            <set-value on="city">
                                var address = "";
                                if (typeof city != 'undefined')
                                    address += city;
                                if (typeof street != 'undefined') {
                                    if (address.length !== 0)
                                        address += ", ";
                                    address += street;
                                }
                                if (typeof house != 'undefined') {
                                    if (address.length !== 0)
                                        address += ", ";
                                    address += house;
                                }
                                return address;
                            </set-value>
                        </dependencies>
                    </input-text>
                    <input-text id="city" label="Город (значение должно копироваться в модальное окно и обратно)" default-value="Казань"/>
                </fields>
            </form>
            <form id="form2">
                <fields>
                    <input-text id="street" label="Улица (значение должно копироваться в модальное окно, но не обратно)" default-value="Качалова"/>
                </fields>
            </form>
        </line>
        <line label="Передача параметров из фильтров таблицы">
            <table id="tableWgt">
                <datasource query-id="test"/>
                <columns>
                    <column text-field-id="id"/>
                    <column text-field-id="name"/>
                    <column text-field-id="type"/>
                </columns>
                <filters>
                    <row>
                        <input-text id="name"/>
                        <input-text id="type"/>
                        <button label="Расширенные фильтры" model="filter">
                            <open-drawer page-id="filters" submit-label="Применить" route="/filters" submit-action-type="copy"
                                         target-model="filter" copy-mode="replace">
                                <datasources>
                                    <datasource default-values-mode="defaults"/>
                                </datasources>
                            </open-drawer>
                        </button>
                    </row>
                </filters>
            </table>
        </line>
    </regions>
</page>